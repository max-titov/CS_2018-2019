import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.awt.image.*;
import java.util.ArrayList;

public class ShapePanel extends JPanel implements MouseListener {
	private static final Color BACKGROUND = new Color(242, 43, 43);

	// ** Create variables for shape size and color
	private int shapeSize = 10;
	private Color shapeColor = Color.blue;

	// **Create the reference for the array
	// ** the arraySize and the nextIndex

	private ArrayList<Shape> shapes;
	private int arraySize = 10;
	private int nextIndex = 0;

	Color myColor;
	Timer t;

//************** Constructor  ***********************
	public ShapePanel() {

		myColor = BACKGROUND;
		// *************** Initialize the index and the array
		shapes = new ArrayList<Shape>();

		// **************************************************
		// timer to repaint every 20 nanoseconds
		// The listener for this is at the bottom
		t = new Timer(20, new Listener());
		t.start();
		addMouseListener(this);
	}

	public void paintComponent(Graphics g) {

		// Overwrite what was on the screen before
		// with a blank background
		g.setColor(myColor);
		g.fillRect(0, 0, getWidth(), getHeight());

		// ********** draw the shapes and the lines
		for(int i = 0; i< shapes.size(); i++) {
			shapes.get(i).draw(g);
			for(int k = i+1; k< shapes.size(); k++) {
				int x1 = shapes.get(i).getX();
				int y1 = shapes.get(i).getY();
				int x2 = shapes.get(k).getX();
				int y2 = shapes.get(k).getY();
				int distance = (int) Math.sqrt(Math.pow(x1-x2, 2) + Math.pow(y1-y2, 2));
				int colorNum = 255/distance;
				g.setColor(new Color(colorNum,colorNum,colorNum));
				g.drawLine(x1, y1, x2, y2);
			}
		}

	}

	// *********** Implement the methods for any interfaces

//**  The method below could be useful to test the mouse interaction
	void saySomething(String eventDescription, MouseEvent e) {
		System.out.println(eventDescription + " detected on " + e.getComponent().getClass().getName() + "." + "\n");
	}

	private class Listener implements ActionListener {
		public void actionPerformed(ActionEvent e) {
			repaint();

		}
	}

	@Override
	public void mouseClicked(MouseEvent e) {
		saySomething("clicked", e);

	}

	@Override
	public void mouseEntered(MouseEvent e) {
		saySomething("entered", e);

	}

	@Override
	public void mouseExited(MouseEvent e) {
		saySomething("exited", e);
		shapes.clear();

	}

	@Override
	public void mousePressed(MouseEvent e) {
		saySomething("pressed", e);
		int x = e.getX();
		int y = e.getY();

		shapes.add(new Circle(x, y, shapeSize, shapeColor));

	}

	@Override
	public void mouseReleased(MouseEvent e) {
		saySomething("clicked", e);

	}

}